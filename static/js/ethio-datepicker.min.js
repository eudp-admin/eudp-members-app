!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.EthioDatePicker=t()}(this,function(){"use strict";var e={1:"መስከረም",2:"ጥቅምት",3:"ኅዳር",4:"ታኅሣሥ",5:"ጥር",6:"የካቲት",7:"መጋቢት",8:"ሚያዝያ",9:"ግንቦት",10:"ሰኔ",11:"ሐምሌ",12:"ነሐሴ",13:"ጳጉሜን"},t={1:30,2:30,3:30,4:30,5:30,6:30,7:30,8:30,9:30,10:30,11:30,12:30,13:5},a={1:"መስከ",2:"ጥቅም",3:"ኅዳር",4:"ታኅሣ",5:"ጥር",6:"የካቲ",7:"መጋቢ",8:"ሚያዝ",9:"ግንቦ",10:"ሰኔ",11:"ሐምሌ",12:"ነሐሴ",13:"ጳጉሜ"},i={0:"እሑድ",1:"ሰኞ",2:"ማክሰኞ",3:"ረቡዕ",4:"ሐሙስ",5:"ዓርብ",6:"ቅዳሜ"},s={0:"እሑ",1:"ሰኞ",2:"ማክ",3:"ረቡ",4:"ሐሙ",5:"ዓር",6:"ቅዳ"};function n(e){var a=e.getFullYear();return a%4==3?Object.assign({},t,{13:6}):t}function r(e){var t=e.split("-").map(Number),a=t[0],i=t[1],s=t[2];return new Date(a,i-1,s)}function o(e,t){var a=new Date(e.getTime());return a.setDate(a.getDate()+t),a}function d(e,t){for(var a=e.getMonth(),i=e.getFullYear(),s=0;s<t;s++)11===a?(a=0,i++):a++;return new Date(i,a,1)}function c(e,t){for(var a=e.getMonth(),i=e.getFullYear(),s=0;s<t;s++)0===a?(a=11,i--):a--;return new Date(i,a,1)}function l(e,t){var a=e.getFullYear();return new Date(a+t,e.getMonth(),1)}function h(e,t){var a=e.getFullYear();return new Date(a-t,e.getMonth(),1)}function u(e){var t=e.split("-").map(Number),a=t[0],i=t[1],s=t[2];return{year:a,month:i,day:s}}function p(t,a){return-1===a.indexOf("d")&&-1===a.indexOf("M")&&-1===a.indexOf("Y")?a:a.replace(/d+/g,function(e){return String(t.day).padStart(e.length,"0")}).replace(/Y+/g,function(e){return String(t.year).slice(-e.length)}).replace(/M+/g,function(t){var i=t.month;return"MMMM"===t?e[i]:"MMM"===t?n[i]:String(i).padStart(t.length,"0")})}var m=function(e){var t=e.ethioDate,a=t.year,i=t.month,s=t.day,n=e.gregorianDate.getFullYear(),r=e.gregorianDate.getMonth()+1,o=e.gregorianDate.getDate();return{ethioDate:{year:a,month:i,day:s},gregorianDate:{year:n,month:r,day:o}}};function D(e){var t=r(e),a=o(t,-2796),i=Math.floor((a.getFullYear()-1)/4),s=a.getFullYear()%4,n=Math.floor((o(a,1).getTime()-new Date(a.getFullYear(),0,1).getTime())/864e5),d=s*365+i+n,c=Math.floor(d/30)+1,l=d%30+1;return m({ethioDate:{year:a.getFullYear()-8+1,month:c,day:l},gregorianDate:t})}function g(e){var t=u(e),a=t.year+7,i=new Date(a,8,17),s=Math.floor((i.getFullYear()-1)/4)-Math.floor((a-1)/4),n=30*(t.month-1)+t.day+s,r=o(i,n);return m({ethioDate:t,gregorianDate:r})}var f=Object.freeze({weekdays:i,short_weekdays:s,months:e,short_months:a}),y=function(){function e(t,a){void 0===a&&(a={}),this.input=t,"string"==typeof t&&(this.input=document.querySelector(t)),this.options=Object.assign({},e.DEFAULTS,a),this.ethiopianMonths=f.months,this.ethiopianShortMonths=f.short_months,this.ethiopianWeekdays=f.weekdays,this.ethiopianShortWeekdays=f.short_weekdays,this.today=new Date,this.todayInEth=D(this.formatDate(this.today)),this.currentDisplayDate=this.today,this.selectedDate=null,this.selectedDateInEth=null,this.isCalendarVisible=!1,this.onSelectCallback=this.options.onSelect,this.createDatePicker(),this.input.addEventListener("focus",this.showCalendar.bind(this)),document.addEventListener("click",this.handleClickOutside.bind(this)),this.input.value&&this.handleInitialValue(this.input.value)}return e.prototype.handleInitialValue=function(e){var t=D(e);this.selectedDate=r(e),this.selectedDateInEth=t.ethioDate,this.currentDisplayDate=this.selectedDate,this.updateInput(),this.renderCalendar()},e.prototype.createDatePicker=function(){this.datepicker=document.createElement("div"),this.datepicker.className="ethio-datepicker",this.datepicker.style.display="none";var e=this.input.getBoundingClientRect();this.datepicker.style.top=e.bottom+window.scrollY+"px",this.datepicker.style.left=e.left+window.scrollX+"px",document.body.appendChild(this.datepicker),this.renderCalendar()},e.prototype.renderCalendar=function(){this.datepicker.innerHTML="";var e=this.createHeader(),t=this.createBody(),a=this.createFooter();this.datepicker.appendChild(e),this.datepicker.appendChild(t),this.datepicker.appendChild(a),this.addMonthYearDropdownListeners()},e.prototype.createHeader=function(){var t=this,a=document.createElement("div");a.className="datepicker-header";var i=document.createElement("div");i.className="prev-year",i.innerHTML="&laquo;",i.onclick=function(){return t.changeYear(-1)};var s=document.createElement("div");s.className="prev-month",s.innerHTML="&lsaquo;",s.onclick=function(){return t.changeMonth(-1)};var n=document.createElement("div");n.className="month-year-container";var r=document.createElement("div");r.className="month-selector",r.textContent=this.ethiopianMonths[D(this.formatDate(this.currentDisplayDate)).ethioDate.month];var o=document.createElement("div");o.className="year-selector",o.textContent=D(this.formatDate(this.currentDisplayDate)).ethioDate.year;var d=document.createElement("div");d.className="next-month",d.innerHTML="&rsaquo;",d.onclick=function(){return t.changeMonth(1)};var c=document.createElement("div");c.className="next-year",c.innerHTML="&raquo;",c.onclick=function(){return t.changeYear(1)};var l=this.options.changeYearButtons,h=this.options.changeMonthButtons;return n.appendChild(r),n.appendChild(o),l&&a.appendChild(i),h&&a.appendChild(s),a.appendChild(n),h&&a.appendChild(d),l&&a.appendChild(c),a},e.prototype.createBody=function(){var e,t=this,a=document.createElement("div");a.className="datepicker-body";var i=document.createElement("table"),s=document.createElement("thead"),r=document.createElement("tr");this.options.weekdays.forEach(function(e){var t=document.createElement("th");t.textContent=e,r.appendChild(t)}),s.appendChild(r);var o=document.createElement("tbody"),d=D(this.formatDate(this.currentDisplayDate)).ethioDate,c=d.year,l=d.month,h=new Date(g(c+"-1-1").gregorianDate),u=(e=new Date(g(c+"-"+l+"-1").gregorianDate),n(e)),p=[];for(var m=1;m<=u[l];m++){var y=g(c+"-"+l+"-"+m).gregorianDate,k=this.formatDate(y),v={day:m,date:y,dateStr:k};p.push(v)}for(var b=h.getDay(),E=document.createElement("tr"),C=0;C<b;C++){var S=document.createElement("td");S.className="disabled",E.appendChild(S)}return p.forEach(function(e,a){a>0&&a%7==0&&0==b&&(o.appendChild(E),E=document.createElement("tr"));var i=document.createElement("td");i.textContent=e.day,i.onclick=function(){return t.selectDate(e)},e.dateStr===t.formatDate(t.today)&&i.classList.add("today"),t.selectedDate&&e.dateStr===t.formatDate(t.selectedDate)&&i.classList.add("selected"),E.appendChild(i),(b+a+1)%7==0&&(o.appendChild(E),E=document.createElement("tr"))}),o.appendChild(E),i.appendChild(s),i.appendChild(o),a.appendChild(i),a},e.prototype.createFooter=function(){var e=this,t=document.createElement("div");t.className="datepicker-footer";var a=document.createElement("button");return a.textContent="Today",a.onclick=function(){var t=e.todayInEth.ethioDate,a={day:t.day,date:e.today,dateStr:e.formatDate(e.today)};e.selectDate(a)},t.appendChild(a),t},e.prototype.addMonthYearDropdownListeners=function(){var t=this,a=this.datepicker.querySelector(".month-selector"),i=this.datepicker.querySelector(".year-selector");a.addEventListener("click",function(s){s.stopPropagation(),t.createDropdown(a,Object.values(e),function(e){t.currentDisplayDate=d(t.currentDisplayDate,e-D(t.formatDate(t.currentDisplayDate)).ethioDate.month+1),t.renderCalendar()})}),i.addEventListener("click",function(e){e.stopPropagation();var a=D(t.formatDate(t.currentDisplayDate)).ethioDate.year,s=[];for(var n=a-10;n<=a+10;n++)s.push(n);t.createDropdown(i,s,function(e){t.currentDisplayDate=l(t.currentDisplayDate,e-a),t.renderCalendar()})})},e.prototype.createDropdown=function(e,t,a){var i=this.datepicker.querySelector(".month-year-dropdown");i&&i.remove();var s=document.createElement("div");s.className="month-year-dropdown";var n=e.getBoundingClientRect();s.style.top=n.bottom+"px",s.style.left=n.left+"px",t.forEach(function(i,n){var r=document.createElement("div");r.textContent=i,r.onclick=function(){a(t===Object.values(e)?n+1:i),s.remove()},s.appendChild(r)}),this.datepicker.appendChild(s)},e.prototype.changeMonth=function(e){this.currentDisplayDate=1===e?d(this.currentDisplayDate,1):c(this.currentDisplayDate,1),this.renderCalendar()},e.prototype.changeYear=function(e){this.currentDisplayDate=1===e?l(this.currentDisplayDate,1):h(this.currentDisplayDate,1),this.renderCalendar()},e.prototype.selectDate=function(e){this.selectedDate=e.date,this.selectedDateInEth=D(e.dateStr).ethioDate,this.updateInput(),this.hideCalendar(),this.onSelectCallback&&this.onSelectCallback(this.selectedDate,this.selectedDateInEth)},e.prototype.clearSelection=function(){this.selectedDate=null,this.selectedDateInEth=null,this.input.value="",this.renderCalendar()},e.prototype.updateInput=function(){this.selectedDateInEth?this.input.value=this.formatDate(this.selectedDate):this.input.value=""},e.prototype.showCalendar=function(){var e=this.input.getBoundingClientRect();this.datepicker.style.top=e.bottom+window.scrollY+"px",this.datepicker.style.left=e.left+window.scrollX+"px",this.datepicker.style.display="block",this.isCalendarVisible=!0,this.input.value?this.currentDisplayDate=this.selectedDate:this.currentDisplayDate=this.today,this.renderCalendar()},e.prototype.hideCalendar=function(){this.datepicker.style.display="none",this.isCalendarVisible=!1},e.prototype.handleClickOutside=function(e){this.isCalendarVisible&&!this.datepicker.contains(e.target)&&e.target!==this.input&&this.hideCalendar()},e.prototype.formatDate=function(e){var t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0");return t+"-"+a+"-"+i},e}();return y.DEFAULTS={onSelect:null,changeYearButtons:!0,changeMonthButtons:!0,weekdays:s,ethiopianDateFormat:"d, M YYYY",dateFormat:"YYYY-MM-DD"},y});